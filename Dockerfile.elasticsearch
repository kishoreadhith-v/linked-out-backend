FROM docker.elastic.co/elasticsearch/elasticsearch:8.12.0

# Copy custom elasticsearch configuration if needed
COPY elasticsearch.yml /usr/share/elasticsearch/config/

# Set environment variables
ENV discovery.type=single-node
ENV xpack.security.enabled=true

# Expose ports
EXPOSE 9200 9300

# Set healthcheck
HEALTHCHECK --interval=30s --timeout=10s --retries=3 \
  CMD curl -f http://localhost:9200/_cluster/health || exit 1 